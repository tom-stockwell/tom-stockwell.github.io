<!doctype html><html lang=en><head><title>Migrating Applications to OpenShift, Part 1: Overview ::
Tom Stockwell</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This post was originally published on Red Hat Developer. To read the original post, visit Migrating applications to OpenShift, Part 1: Overview.
   I help teams migrate their applications onto Red Hat OpenShift, so I can&amp;rsquo;t help but notice patterns and considerations that arise regarding the migration process. Such operations have many domain-specific factors, but in regard to getting the applications up and running on OpenShift, there appear to be several common patterns that teams use to migrate successfully."><meta name=keywords content="software,development,coding,red hat,openshift"><meta name=robots content="noodp"><link rel=canonical href=/posts/migrating-apps-to-openshift-1/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/img/favicon.png><link href=/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Migrating Applications to OpenShift, Part 1: Overview"><meta name=twitter:description content="I help teams migrate their applications onto [Red Hat OpenShift](http://developers.redhat.com/openshift/), so I can't help but notice patterns and considerations that arise regarding the migration process. Such operations have many domain-specific factors, but in regard to getting the applications up and running on OpenShift, there appear to be several common patterns that teams use to migrate successfully."><meta property="og:title" content="Migrating Applications to OpenShift, Part 1: Overview"><meta property="og:description" content="I help teams migrate their applications onto [Red Hat OpenShift](http://developers.redhat.com/openshift/), so I can't help but notice patterns and considerations that arise regarding the migration process. Such operations have many domain-specific factors, but in regard to getting the applications up and running on OpenShift, there appear to be several common patterns that teams use to migrate successfully."><meta property="og:type" content="article"><meta property="og:url" content="/posts/migrating-apps-to-openshift-1/"><meta property="article:published_time" content="2020-04-07T03:05:00+01:00"><meta property="article:modified_time" content="2020-09-03T02:59:57+01:00"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>echo "Tom Stockwell"</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/showcase>Showcase</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/showcase>Showcase</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41C32.4934 41 41 32.4934 41 22 41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Migrating Applications to OpenShift, Part 1: Overview</h1><div class=post-meta><span class=post-date>Tuesday, 7 Apr, 2020</span>
<span class=post-read-time>— 5 min read</span></div><div class=post-content><p>This post was originally published on Red Hat Developer. To read the original post, visit <a href=https://developers.redhat.com/blog/2020/04/07/migrating-applications-to-openshift-part-1-overview/>Migrating applications to OpenShift, Part 1: Overview</a>.</p><p> </p><hr><p> </p><p>I help teams migrate their applications onto <a href=http://developers.redhat.com/openshift/>Red Hat OpenShift</a>, so I can&rsquo;t help but notice patterns and considerations that arise regarding the migration process.
Such operations have many domain-specific factors, but in regard to getting the applications up and running on OpenShift, there appear to be several common patterns that teams use to migrate successfully.</p><p>I&rsquo;ve found the following are useful effort breakpoints:</p><ol><li>Proof of concept.</li><li>Set up continuous integration and continuous delivery (CI/CD) for a single environment.</li><li>Set up CD for multiple environments.</li></ol><p>In this series, I will break down the work involved in each of these stages and use the <a href=https://istio.io/docs/examples/bookinfo/>bookinfo</a> application from the <a href=https://istio.io/>Istio</a> project to demonstrate.
I selected <code>bookinfo</code> because it is an existing sample microservices application that I can deploy from scratch onto OpenShift.
Additionally, <code>bookinfo</code> is polyglot (the microservices are each written in different languages), which allows me to showcase my thought process by migrating different types of services across a spectrum of programming languages.</p><p>I forked the <code>bookinfo</code> subdirectory from Istio using the process described by GitHub: <a href=https://help.github.com/en/github/using-git/splitting-a-subfolder-out-into-a-new-repository>Splitting a subfolder out into a new repository</a>.
You can find my fork at <a href=https://github.com/rh-tstockwell/bookinfo>rh-tstockwell/bookinfo</a>.
The <code>master</code> branch is a direct fork from <a href=https://github.com/istio/istio/tree/master/samples/bookinfo>istio/istio</a>, while the <code>develop</code> branch contains the changes made in this series.</p><h2 id=prerequisites>Prerequisites
<a href=#prerequisites class=h-anchor aria-hidden=true>#</a></h2><p>For this series, I assume you have at least beginner OpenShift, Kubernetes, and container knowledge.
Additionally, you will need developer access to an OpenShift cluster.
If you do not have one available to you, you can try it out for free (see <a href=https://www.openshift.com/learn/get-started/>Get started with OpenShift</a>).</p><p>You will also need to <a href=https://docs.openshift.com/container-platform/3.11/cli_reference/get_started_cli.html#installing-the-cli>install the <code>oc</code> client</a> and successfully log into your cluster with standard developer privileges.
If you followed one of the guides from the get started page, your guide should have instructions for you.</p><p>I primarily use the <code>oc</code> client in this series (I generally prefer the command line), but you can make all of these changes using the GUI as well.</p><h2 id=proof-of-concept>Proof of concept
<a href=#proof-of-concept class=h-anchor aria-hidden=true>#</a></h2><p>First, the goal is to get your application up and running quickly to act as a proof of concept.
The aim is to understand the complexity involved in your undertaking as early as possible to de-risk what you can upfront.</p><p>My rules of thumb for this stage are, where possible:</p><ul><li>Spend as little time as possible getting your apps to work</li><li>Use standard s2i images or templates (<a href=https://github.com/openshift/source-to-image/blob/master/README.md#goals>learn why here</a>)</li><li>Avoid code changes</li></ul><blockquote><p><strong>Note:</strong> From experience, it is Hard Work™ supporting drifting codebases during a platform migration, so we try to avoid this issue where we can.</p></blockquote><p>In Part 2 of this series, I will demonstrate how easy it is to get bookinfo up and running on an OpenShift cluster using <a href=https://docs.openshift.com/container-platform/3.11/dev_guide/application_lifecycle/new_app.html#using-the-cli>oc new-app</a>.</p><h2 id=set-up-cicd-for-a-single-environment>Set up CI/CD for a single environment
<a href=#set-up-cicd-for-a-single-environment class=h-anchor aria-hidden=true>#</a></h2><p>The second goal is to be able to make changes to your application through a simple CI/CD pipeline.
This pipeline allows you to evolve your application faster, and with more dependability and assurance.</p><p>In this stage, we export Kubernetes (k8s) resources to <a href=https://www.atlassian.com/git/tutorials/what-is-version-control#benefits-of-version-control>version control</a>, which can be alongside the application or in a separate repository.
We then create a simple <a href=https://www.redhat.com/en/topics/devops/what-is-ci-cd>CI/CD pipeline</a> that:</p><ul><li>Runs your defined tests</li><li>Deploys new application code on demand</li><li>Deploys updates to Kubernetes resources required by the application</li></ul><p>Ideally, this process should work from and to any possible state.</p><p>Once you have a completed pipeline, I recommend cleaning up any technical debt that resulted from getting your apps working.
You should also implement anything that you left out of the proof of concept that you require for a working, production-ready application (from an application perspective, not necessarily from an ops perspective).
I purposefully delay dealing with these issues until we have a working pipeline so we can use the benefits of the pipeline when implementing these more difficult features.</p><p>I will showcase a simple series of CI/CD pipelines using <a href=https://docs.openshift.com/container-platform/3.11/dev_guide/openshift_pipeline.html>OpenShift and Jenkins Pipelines</a> for the <code>bookinfo project</code> in Part 3 of this series.</p><h2 id=set-up-continuous-delivery-for-multiple-environments>Set up continuous delivery for multiple environments
<a href=#set-up-continuous-delivery-for-multiple-environments class=h-anchor aria-hidden=true>#</a></h2><p>Lastly, we need to reconfigure the CD pipelines we created in the previous step to add the ability to deploy to multiple environments.
I like to keep this step separate from the previous one as it usually involves extra steps, configuration, and templating of the k8s resources.
You can also implement this step in many ways.</p><p>In Part 4 of this series, I will show how to implement a basic multi-environment CD pipeline in Jenkins with no external software.</p><h2 id=further-considerations>Further considerations
<a href=#further-considerations class=h-anchor aria-hidden=true>#</a></h2><p>Now, I haven&rsquo;t tried to cover every single aspect of running an application on OpenShift, but here a few things that I haven&rsquo;t covered that you might want to investigate once you have reached this stage in your journey:</p><ul><li>Manage your k8s resources with <a href=https://blog.openshift.com/introduction-to-gitops-with-openshift/>GitOps</a> (you should already be part-way there, as the pipelines already source the k8s resources from version control).</li><li><a href=https://blog.openshift.com/managing-secrets-openshift-vault-integration/>Improve your secrets management</a> with something like <a href=https://www.vaultproject.io/>HashiCorp Vault</a></li><li>Set up a persistent storage/backup/redundancy lifecycle (which is dependant on your specific environment and needs).</li></ul></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>echo "Tom Stockwell"</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2022 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script></div></body></html>